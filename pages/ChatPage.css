/* Sandboard Chat Styles */

#sb-chat {
  @apply w-full h-full;
}

.chat-container {
  @apply mx-auto p-0 h-full;
}

.chat-card {
  @apply w-full h-full bg-white border border-amber-200/80 rounded-2xl flex overflow-hidden shadow-sm;
}

/* Sidebar */
.chat-sidebar {
  @apply w-full md:w-80 lg:w-96 border-r border-amber-200/80 flex flex-col transition-transform duration-300 ease-in-out;
}

.sidebar-head {
  @apply flex items-center justify-between p-4 border-b border-amber-200/80;
}

.sidebar-title {
  @apply text-xl font-bold font-manrope text-amber-900;
}

.sidebar-close {
  @apply md:hidden;
}

.sidebar-search {
  @apply p-3 border-b border-amber-200/80;
}

.search-field {
  @apply relative;
}

.search-field img {
  @apply absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 opacity-50;
}

.search-field .search-input {
  @apply w-full bg-amber-50/80 border border-amber-200/80 rounded-lg pl-10 pr-4 py-2 text-sm outline-none focus:ring-2 focus:ring-primary focus:border-primary;
}

.chat-list {
  @apply flex-grow overflow-y-auto;
}

.chat-item {
  @apply flex items-start gap-3 p-3 cursor-pointer border-b border-amber-100/80 transition-colors;
}

.chat-item:hover {
  @apply bg-amber-50;
}

.chat-item.is-active {
  @apply bg-amber-100;
}

.chat-item .avatar {
  @apply w-12 h-12 rounded-full object-cover shrink-0;
}

.item-main {
  @apply flex-1 min-w-0;
}

.item-top {
  @apply flex justify-between items-center;
}

.item-name {
  @apply font-semibold text-amber-900/90 truncate;
}

.item-time {
  @apply text-xs text-amber-800/60 shrink-0 ml-2;
}

.item-preview {
  @apply text-sm text-amber-800/70 truncate block;
}


/* Main Chat Area */
.chat-main {
  @apply flex-1 flex-col h-full bg-amber-50/30 hidden md:flex;
}

.chat-header {
  @apply flex items-center gap-3 p-3 border-b border-amber-200/80 bg-white shadow-sm shrink-0;
}

.mobile-toggle {
  @apply md:hidden;
}

.peer {
  @apply flex items-center gap-3 min-w-0;
}

.peer img {
  @apply w-10 h-10 rounded-full object-cover;
}

.peer-meta {
  @apply min-w-0;
}

.peer-name {
  @apply font-bold text-amber-900 truncate block;
}
.peer-status {
  @apply text-xs text-green-600;
}

.header-actions {
  @apply ml-auto;
}

.icon-btn {
  @apply p-2 rounded-full hover:bg-amber-100;
}

.icon-btn img {
  @apply w-5 h-5;
}

.messages {
  @apply flex-1 overflow-y-auto p-4 lg:p-6 flex flex-col gap-2;
}

.msg {
  @apply flex max-w-[80%] sm:max-w-[70%];
}

.msg.incoming {
  @apply self-start;
}

.msg.outgoing {
  @apply self-end;
}

.bubble {
  @apply px-4 py-2 rounded-2xl relative text-sm;
}
.bubble .time {
  @apply text-xs opacity-70 ml-3;
}

.msg.incoming .bubble {
  @apply bg-white border border-amber-200/60 rounded-bl-lg;
}
.msg.outgoing .bubble {
  @apply bg-primary text-primary-content rounded-br-lg;
}
.msg.outgoing .bubble .time {
    @apply text-amber-900/60;
}

.composer {
  @apply p-3 border-t border-amber-200/80 bg-white shrink-0;
}
.composer .field {
  @apply flex items-center gap-2;
}
.composer .field > input {
  @apply flex-grow bg-amber-50/80 border border-amber-200/80 rounded-full py-2 px-4 outline-none focus:ring-2 focus:ring-primary focus:border-primary;
}

.send-btn {
    @apply w-10 h-10 bg-primary text-white rounded-full flex items-center justify-center shrink-0;
}
.send-btn img {
    @apply w-5 h-5;
}


/* Mobile Specifics */
@media (max-width: 767px) {
  #sb-chat {
    /* The whole component takes up the screen */
  }

  .chat-sidebar {
    position: fixed;
    inset: 0;
    z-index: 50;
    background: white;
    transform: translateX(-100%);
  }

  #sb-chat.sidebar-open .chat-sidebar {
    transform: translateX(0);
  }

  .overlay {
    @apply fixed inset-0 bg-black/40 z-40;
  }
  
  .chat-main {
    display: flex; /* Show the main chat if a chat is selected */
  }

  #sb-chat:not(.sidebar-open) .overlay {
    display: none;
  }
}
